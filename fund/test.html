<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>每日基金</title>
		<link rel="shortcut icon" href="favicon.ico">
		<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.0/axios.min.js"></script> -->
		<script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/echarts/3.8.0/echarts-en.common.min.js"></script>
		
		</script>
		<script type="text/javascript">
			
		</script>
	</head>
	<body>
		
		<div id="chartmain" style="width:600px; height: 400px;"></div>
	</body>
	<script type="text/javascript">
		var code = this.getQueryString("code") || '000339';
		var head = document.head || document.getElementsByTagName('head')[0];
		var script = document.createElement('script');
		script.setAttribute("src", "https://fund.eastmoney.com/pingzhongdata/" + code + ".js?v=20160518155842");
		script.setAttribute("id", "data");
		head.appendChild(script);
		// https://www.jianshu.com/p/708c915fb905
		function getQueryString(name) {
			let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
			let r = window.location.search.substr(1).match(reg);
			if (r != null) {
				return decodeURIComponent(r[2]);
			};
			return null;
		}
		//https://www.cnblogs.com/Kathrine/p/13182353.html   ajax
		
		
		
		document.getElementById("data").onload = function() {
			console.log("code: "+ code +";\nstockCodes:"+stockCodes)
		}
		
		var myChart = echarts.init(document.getElementById('chartmain'));
		$.get('https://cdn.jsdelivr.net/gh/apache/incubator-echarts-website@asf-site/examples/data/asset/data/aqi-beijing.json', function (data) {
		    myChart.setOption(option = {
		        title: {
		            text: '测试数据 Beijing AQI'
		        },
		        tooltip: {
		            trigger: 'axis'
		        },
		        xAxis: {
		            data: data.map(function (item) {
		                return item[0];
		            })
		        },
		        yAxis: {
		            splitLine: {
		                show: false
		            }
		        },
		        toolbox: {
		            left: 'center',
		            feature: {
		                dataZoom: {
		                    yAxisIndex: 'none'
		                },
		                restore: {},
		                saveAsImage: {}
		            }
		        },
		        dataZoom: [{
		            startValue: '2014-06-01'
		        }, {
		            type: 'inside'
		        }],
		        visualMap: {
		            top: 10,
		            right: 10,
		            pieces: [{
		                gt: 0,
		                lte: 50,
		                color: '#096'
		            }, {
		                gt: 50,
		                lte: 100,
		                color: '#ffde33'
		            }, {
		                gt: 100,
		                lte: 150,
		                color: '#ff9933'
		            }, {
		                gt: 150,
		                lte: 200,
		                color: '#cc0033'
		            }, {
		                gt: 200,
		                lte: 300,
		                color: '#660099'
		            }, {
		                gt: 300,
		                color: '#7e0023'
		            }],
		            outOfRange: {
		                color: '#999'
		            }
		        },
		        series: {
		            name: 'Beijing AQI',
		            type: 'line',
		            data: data.map(function (item) {
		                return item[1];
		            }),
		            markLine: {
		                silent: true,
		                data: [{
		                    yAxis: 50
		                }, {
		                    yAxis: 100
		                }, {
		                    yAxis: 150
		                }, {
		                    yAxis: 200
		                }, {
		                    yAxis: 300
		                }]
		            }
		        }
		    });
		});
		
	</script>
</html>
